<h1>Burger!</h1>

<h2>Eat the burger!</h2>

<ul>
  {{#each burgers}}
    {{#unless devoured}}
    <h2>{{this.id}}.{{this.burger_name}}</h2>
    <button class="eatBurger" data-id="{{this.id}}">Eat the Burger</button>
    {{/unless}}
  {{/each}}
</ul>

<h2>Eaten burgers</h2>

<ul>
  {{#each burgers}}
    {{#if devoured}}
      <h2>{{this.id}}.{{this.burger_name}}</h2>
      <button class="makeBurger" data-id="{{this.id}}">Make the Burger</button>
    {{/if}}
  {{/each}}
</ul>

 <script type="text/javascript">
    $(document).on("click", ".eatBurger", eatBurger);
    $(document).on("click", ".cookBurger", cookBurger)
    function eatBurger() {
        let id = $(this).data("id")
        let eaten = {devoured: 1}
        $.ajax("/api/burgers/" + id, {
            method: "PUT",
            data: eaten
        }).then(function(){
            console.log("Burger status changed")
            location.reload()
        })
    }
    function cookBurger() {
        let id = $(this).data("id")
        let eaten = {devoured: 0}
        $.ajax("/api/burgers/" + id, {
            method: "PUT",
            data: eaten
        }).then(function(){
            console.log("Burger status changed")
            location.reload()
        })
    }
    </script>